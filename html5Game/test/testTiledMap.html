<!DOCTYPE html> 
<html> 
  <head> 
    <title>TiledMap Test</title> 
    <script type="text/javascript" src="../js/jquery-1.5.2.min.js"></script>
    <script type="text/javascript" src="unitTest.js"></script> 
    <script type="text/javascript" src="../js/TiledMap.js"></script> 
    
    <style>
		html {
			background: #CCCCCC;
		}
    </style>
    <script>
		var tiledMap = new TiledMap(300,400,32,32);
		testManagerConfig = {"tileWidth":32, "tileHeight":32, "src":"../res/dungeontiles.gif", "namedTiles":[
			{"id":0,"name":"WALL1","col":0,"row":0},
			{"id":1,"name":"FLOOR1","col":1,"row":8},
			{"id":2,"name":"DOOR1","col":4,"row":2},
			{"id":3,"name":"DOOR2","col":1,"row":6}
		]}
	
		tileMapManager = new SpriteTileManager(testManagerConfig);
		
		tiledMap.tiles = [
				[{},{}],
				[{},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0}],
				[{},{"id":2, "type":2},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0}],
				[{},{"id":0, "type":0},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":3, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":3, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":0, "type":0}],
				[{},{"id":0, "type":0},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":0, "type":0}],
				[{},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{},{},{"id":0, "type":0},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":0, "type":0}],
				[{},{},{},{},{},{},{},{},{},{"id":0, "type":0},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":0, "type":0}],
				[{},{},{},{},{},{},{},{},{},{"id":0, "type":0},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":0, "type":0}],
				[{},{},{},{},{},{},{},{},{},{"id":0, "type":0},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":0, "type":0}],
				[{},{},{},{},{},{},{},{},{},{"id":0, "type":0},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":1, "type":1},{"id":0, "type":0}],
				[{},{},{},{},{},{},{},{},{},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0},{"id":0, "type":0}]
		];
		tiledMap.tileMapManager = tileMapManager;
		
		/**
		 * Test constructor
		 */
		function testTiledMap(){
			info = "",resp = false;
			try {
				mapSize =  tiledMap.getMapSize();
				info = "size="+mapSize;	//assertEquals(tile3,tileMapManagerObj.getNamedTileById(3));
				resp = true;
			} catch(err) {
				info = "ERROR: "+err;
				console.log(info);
			}	
			return (info + (resp)?"Success":"Failed");
			
		}
		
		function testRenderMap() {
			info = "",resp = false;
			try {
				map = tiledMap.renderMap();
				
				resp = (map)?"Success":"Failed";
				
			} catch(err) {
				info = "ERROR: "+err;
			}
			return info + (resp)?"Success":"Failed";
		}
		
		function testGetRange() {
			
			info = "",resp = false;
			try {
				range = tiledMap.getRange(2,1,3,3);
				resp = (range.length = 9)?true:false;
				resp = (range[0].id == 2)?true:false
				resp = (range[8].id == 0)?true:false
				
			} catch(err) {
				info = "ERROR: "+err;
				console.log(info);
			}
			return info + (resp)?"Success":"Failed";
		}
		
		function test() {
		
			report("testTiledMap Constructor Test",testTiledMap());	
			report("render Test",testRenderMap());	
			report("testGetRange",testGetRange());
		}
		
		
		$(document).ready(test);
		
    </script>
  </head> 
  <body> 
    <div class="debug">Testing TiledMap</div><br>
  </body> 
</html>

