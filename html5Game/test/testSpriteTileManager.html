<!DOCTYPE html> 
<html> 
  <head> 
    <title>SpriteTileManager Test</title> 
    <script type="text/javascript" src="../js/jquery-1.5.2.min.js"></script>
    <script type="text/javascript" src="unitTest.js"></script> 
    <script type="text/javascript" src="../js/TiledMap.js"></script> 
    
    <style>
		html {
			background: #CCCCCC;
		}
    </style>
    <script>
		tileMapManager = new SpriteTileManager(null, 32,32,"../res/dungeontiles.gif");
		tile = {"id":0,"name":"FLOOR1","col":1,"row":2};
		tile2 = {"id":1,"name":"FLOOR2","col":0,"row":2};
		tile3 = {"id":3,"name":"DOOR2","col":1,"row":6};
		
		testManagerConfig = {"tileWidth":32, "tileHeight":32, "src":"res/dungeontiles.gif", "namedTiles":[
			{"id":0,"name":"WALL1","col":0,"row":0},
			{"id":1,"name":"FLOOR1","col":1,"row":8},
			{"id":2,"name":"DOOR1","col":4,"row":2},
			{"id":3,"name":"DOOR2","col":1,"row":6}
		]}
		
		/**
		 * Test loading of config from object notation.
		 */
		function testSpriteTileManager_object(){
			tileMapManagerObj = new SpriteTileManager(testManagerConfig);
			
			resp = assertEquals(tile3,tileMapManagerObj.getNamedTileById(3));
			return (resp)?"Success":"Failed";
			
		}
		
		function testAddNamedTile_object() {
			
			tileMapManager.addNamedTile(tile);
			tileMapManager.addNamedTile(tile2);
			resp = assertEquals(tile,tileMapManager.getNamedTileById(0));
			return (resp)?"Success":"Failed";
		}
		
		function testGetNamedTile() {
			
			tileMapManager.addNamedTile(tile);
			resp = assertEquals(tile,tileMapManager.getNamedTile('FLOOR1'));
			return (resp)?"Success":"Failed";
		}
		
		function testGetNamedTileFail() {
			
			tileMapManager.addNamedTile(tile);
			resp = assertEquals(tile2,tileMapManager.getNamedTile('FLOOR1'));
			return (resp)?"Success":"Failed";
		}
		
		function test() {
		
			report("testAddNamedTile_object",testAddNamedTile_object());	
			report("testGetNamedTile",testGetNamedTile());	
			report("testGetNamedTileFail",testGetNamedTileFail());
			report("testSpriteTileManager_object",testSpriteTileManager_object());
		}
		

		
		/*function assertEquals(obj1, obj2) {
			for (var i in obj1) {
				if (obj1.hasOwnProperty(i)) {
					if (!obj2.hasOwnProperty(i)) return false;
					if (obj1[i] != obj2[i]) return false;
				}
			}
			for (var i in obj2) {
				if (obj2.hasOwnProperty(i)) {
					if (!obj1.hasOwnProperty(i)) return false;
					if (obj1[i] != obj2[i]) return false;
				}
			}
		}*/
		
		$(document).ready(test);
		
    </script>
  </head> 
  <body> 
    <div class="debug">Testing SpriteTileManager</div><br>
  </body> 
</html>

